# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy PostgreSQL
on:
  push:
    branches:
      - main 

jobs:
  setup:
    runs-on: potus
    steps:
      - uses: actions/checkout@v4

  
  deploy-server:
      runs-on: potus
      needs: setup
      steps:
        - uses: actions/checkout@v4
        - name: Quien soy
          run: whoami
        - name: Bajar servicio anterior Intento 1
          run: docker-compose -f docker-compose-potus.yml -p g4-db down
        - name: Bajar servicio anterior Intento 2
          run: docker-compose -f docker-compose-potus.yml -p g4-db down
        - name: Desplegar en LWS
        #   env:
        #     EMAIL_SMTP_USER: ${{ secrets.EMAIL_SMTP_USER }}
        #     EMAIL_SMTP_PASSWORD: ${{ secrets.EMAIL_SMTP_PASSWORD }}
        #     EMAIL_SMTP_SERVER: ${{ secrets.EMAIL_SMTP_SERVER }}
          run: docker-compose -f docker-compose-potus.yml -p g4-db up -d
